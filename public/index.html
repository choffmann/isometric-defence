<!DOCTYPE HTML>
<html>

<head>
	<meta charset="UTF-8">
	<title>Main</title>
	<style>
		* {
			box-sizing: border-box;
		}

		body {
			padding: 0;
			margin: 0;
			min-height: 100vh;
			min-width: 100vw;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
	</style>
	<script src="https://unpkg.com/elm-canvas@2.2/elm-canvas.js"></script>
	<script src="elm.js"></script>
</head>

<body>
	<div id="elm"></div>
	<button onclick="enterFullScreen()">Fullscreen</button>
	<script>
		try {
			var app = Elm.Main.init({
				node: document.getElementById("elm"),
				flags: { "msg": "Hello World!!!" }
			});

			app.ports.enterFullScreen.subscribe(() => {
				var element = document.getElementById("elm");
				if (element.requestFullscreen) {
					element.requestFullscreen();
				} else if (element.webkitRequestFullscreen) {/* Safari */
					element.webkitRequestFullscreen();
				} else if (element.mozRequestFullScreen) {
					element.mozRequestFullScreen();
				} else if (element.msRequestFullscreen) {/* IE11 */
					element.msRequestFullscreen();
				}
			})

			app.ports.closeFullScreen.subscribe(() => {
				if (document.exitFullscreen) {
					document.exitFullscreen();
				} else if (document.webkitExitFullscreen) { /* Safari */
					document.webkitExitFullscreen();
				} else if (element.mozRequestFullScreen) {
					element.mozExitFullscreen();
				} else if (document.msExitFullscreen) { /* IE11 */
					document.msExitFullscreen();
				}
			})

			document.addEventListener("fullscreenchange", (e) => {
				app.ports.fullScreenChangeReceiver.send(Boolean(document.fullscreenElement))
			})
		}
		catch (e) {
			// display initialization errors (e.g. bad flags, infinite recursion)
			var header = document.createElement("h1");
			header.style.fontFamily = "monospace";
			header.innerText = "Initialization Error";
			var div = document.getElementById("elm");
			document.body.insertBefore(header, div);
			div.innerText = e;
			throw e;
		}
	</script>
</body>

</html>